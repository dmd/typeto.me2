<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="description" content="old-unix-style character at a time talk using websockets">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>typeto.me</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=VT323');

    * {
      font-variant-ligatures: none;
    }

    body {
      font-family: 'VT323', monospace;
      background-color: black;
      color: #FFB000;
      font-size: 20px;
      background-image: radial-gradient(rgba(40, 40, 40, 0.75), black 120%);
      height: 100vh;
      text-shadow: 0 0 2px #FFB000;
      margin: 0px;
      padding: 0px;
    }

    ul {
      white-space-collapse: preserve;
      word-break: break-all;
      position: absolute;
      bottom: 0;
      margin-block-end: 0;
      margin-block-start: 0;
      padding-inline-start: 16px;
    }

    li {
      padding-bottom: 8px;
      min-height: 20px;
    }

    a {
      color: #FFB000 !important;
    }

    a svg {
      height: 16px;
      display: inline-block;
      vertical-align: middle;
      position: relative;
      top: -2px;
      margin-left: 4px;
    }

    .spacer {
      height: 20px;
      width: 0px;
      display: block;
    }

    .scanlines {
      content: " ";
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      background: linear-gradient(to bottom,
          rgba(18, 16, 16, 0) 50%,
          rgba(0, 0, 0, 0.25) 50%);
      background-size: 100% 3px;
      z-index: 2;
    }

    #main-header {
      position: fixed; /* Keep header fixed at the top */
      width: 100%;
      top: 0;
      left: 0;
      text-align: center;
      white-space: nowrap;
      z-index: 10; /* Ensure header is above chat sections */
      background-color: black; /* Give header a background */
      padding: 0; /* Adjust as needed */
      height: 20px; /* Match font-size or desired header height */
      line-height: 20px; /* Vertically center text */
    }

    #chat-container {
      position: absolute;
      top: 20px; /* Start below the fixed header */
      bottom: 0;
      left: 0;
      right: 0;
      display: flex;
      flex-direction: column; /* Stack participant sections vertically */
      overflow: hidden; /* Hide overflow for the container */
    }

    .participant-section {
      flex-grow: 1; /* Allow sections to grow */
      flex-basis: 0; /* Distribute space evenly */
      overflow: hidden; /* Hide overflow within each section */
      position: relative; /* Needed for absolute positioning of ul */
      border-bottom: 1px dashed #FFB000; /* Separator line */
      padding: 0 8px; /* Match old padding */
      display: flex; /* Use flexbox for inner layout */
      flex-direction: column; /* Stack header and messages vertically */
    }

    .participant-section:last-child {
      border-bottom: none; /* No border for the last section */
    }

    .participant-header {
      height: 20px; /* Fixed height for participant header */
      line-height: 20px;
      text-align: center;
      white-space: nowrap;
      flex-shrink: 0; /* Prevent header from shrinking */
      color: #ccc; /* Slightly dimmer color for participant headers */
    }

    .participant-messages {
      flex-grow: 1; /* Allow message area to fill remaining space */
      position: relative; /* Needed for absolute positioning of ul */
      overflow: hidden; /* Hide overflow in message area */
    }

    .participant-messages ul {
      /* ul is absolutely positioned within participant-messages */
      position: absolute;
      bottom: 0;
      left: 8px; /* Adjust based on parent padding */
      right: 8px; /* Adjust based on parent padding */
      /* Remove width: calc(100vw - 16px); */
    }


    #theirs-header, /* Remove old selectors */
    #mine-header { /* Remove old selectors */
      /* position: absolute; */ /* Remove old styles */
      /* width: 100vw; */ /* Remove old styles */
      /* top: 0; */ /* Remove old styles */
      left: 0;
      text-align: center;
      white-space: nowrap;
    }

    ul {
      list-style-type: none;
    }

    li {
      position: relative;
    }

    .cursor::after {
      content: "";
      position: absolute;
      /* Remove display: inline-block if not required to be on the same line as text etc */
      display: inline-block;
      background-color: #606060;
      vertical-align: top;
      width: 10px;
      /* Set height to the line height of .text */
      height: 20px;
      /* 
              Animation paramaters:
              blink = animation-name, 
              1s = animation-duration, 
              step-end = animation-timing-function,
              infinite = animation-iteration-count
              */
      -webkit-animation: blink 1s step-end infinite;
      animation: blink 1s step-end infinite;
    }

    @-webkit-keyframes blink {
      0% {
        opacity: 1.0;
      }

      50% {
        opacity: 0.0;
      }

      100% {
        opacity: 1.0;
      }
    }

    @keyframes blink {
      0% {
        opacity: 1.0;
      }

      50% {
        opacity: 0.0;
      }

      100% {
        opacity: 1.0;
      }
    }

    .pulsate .message {
      -webkit-animation: pulsate 1s cubic-bezier(0.18, 0.89, 0.32, 1.28);
      -webkit-animation-iteration-count: infinite;
      opacity: 0.5;
    }

    @-webkit-keyframes pulsate {
      0% {
        opacity: 0.5;
      }

      50% {
        opacity: 1.0;
      }

      100% {
        opacity: 0.5;
      }
    }

    /* Removed .crt, .crt::after, .crt::before, @keyframes flicker, @keyframes textShadow */

  </style>

</head>
<body>

  <script type="module" src="gui/app.module.js"></script>
  <div id="main" class="scanlines">
    <div id="main-header"></div> {/* Remove crt class */}
    <div id="chat-container">
      {/* Participant sections will be added here dynamically */}
    </div>
  </div>
</body>

</html>
